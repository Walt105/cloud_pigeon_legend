// Dota Heroes File
"DOTAAbilities"
{
	"Version"		"1"

	"majia"  //马甲的基本技能
	{
		"BaseClass"				"ability_datadriven"
		"AbilityBehavior"		"DOTA_ABILITY_BEHAVIOR_PASSIVE | DOTA_ABILITY_BEHAVIOR_HIDDEN"

		"Modifiers"
		{
			"modifier_majia"
			{
				"Passive"		"1"
				"IsHidden"		"1"

				"States"
				{
					"MODIFIER_STATE_NO_HEALTH_BAR"	"MODIFIER_STATE_VALUE_ENABLED" //隐藏血条
					"MODIFIER_STATE_MAGIC_IMMUNE"	"MODIFIER_STATE_VALUE_ENABLED" //魔法免疫
					"MODIFIER_STATE_ATTACK_IMMUNE"	"MODIFIER_STATE_VALUE_ENABLED" //攻击免疫
					"MODIFIER_STATE_UNSELECTABLE"	"MODIFIER_STATE_VALUE_ENABLED" //不可选择
					"MODIFIER_STATE_NO_UNIT_COLLISION"	"MODIFIER_STATE_VALUE_ENABLED" //无碰撞
					"MODIFIER_STATE_NOT_ON_MINIMAP"	"MODIFIER_STATE_VALUE_ENABLED" //小地图不可见
				}
			}
		}
	}

	//================================================================================================
	//主宰 
	//输出技能
	//技能1：三个风暴
	"juggernaut_one_ability1"
	{
		"BaseClass"					"ability_datadriven"
		"AbilityBehavior"			"DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
		"AbilityUnitDamageType"		"DAMAGE_TYPE_PHYSICAL"
		"AbilityUnitTargetTeam"		"DOTA_UNIT_TARGET_TEAM_ENEMY"

		"MaxLevel"					"7"
		"AbilityCastRange"			"200"
		"AbilityCastPoint"			"0"
		"AbilityDuration"			"5"
		"AbilityManaCost"			"100"
		"AbilityCooldown"			"15  14  13  12  11  10  9"
		"AbilityDamage"				"10  15  20  25  30  40  50"
		"AbilityTextureName"		"juggernaut_blade_fury"

		"OnSpellStart"
		{
			"ApplyModifier"
			{
				"Target" 			"CASTER"
				"ModifierName"		"modifier_juggernaut_one_ability1"
			}
		}

		"Modifiers"
		{
			"modifier_juggernaut_one_ability1"
			{
				"IsHidden"			"1"
				"Duration"			"%AbilityDuration"
				"OverrideAnimation"	"ACT_DOTA_OVERRIDE_ABILITY_1"

				"States"
				{
					"MODIFIER_STATE_DISARMED"		"MODIFIER_STATE_VALUE_ENABLED" //无法攻击
					"MODIFIER_STATE_MAGIC_IMMUNE"	"MODIFIER_STATE_VALUE_ENABLED" //魔法免疫
					"MODIFIER_STATE_SILENCED"		"MODIFIER_STATE_VALUE_ENABLED" //沉默
				}

				"OnCreated"
				{
					"AttachEffect"
					{
						"EffectName"		"particles/units/heroes/hero_juggernaut/juggernaut_blade_fury.vpcf"
						"EffectAttachType"  "follow_origin"
						"Target" 			"CASTER"
						"ControlPoints"
						{
							"00"			"00 00 05"
							"05"			"%radius %radius %radius"
						}
					}

					"RunScript"	//创建马甲
					{
						"ScriptFile" 		"scripts/vscripts/Abilities/Hero_juggernaut.lua"
						"Function"			"OneAbility1OnCreate"
						"storm_num"			"%storm_num"
						"radius_two"		"%radius_two"
					}

					"FireSound"
					{
						"EffectName"		"Hero_Juggernaut.BladeFuryStart"
						"Target"     		"CASTER"
					}	
				}

				"OnDestroy"
				{
					"RunScript"
					{
						"ScriptFile" 		"scripts/vscripts/global.lua"
						"Target"			"CASTER"
						"Function"			"StopSound"
						"EffectName"		"Hero_Juggernaut.BladeFuryStart"
					}
					"FireSound"
					{
						"EffectName"		"Hero_Juggernaut.BladeFuryStop"
						"Target"     		"CASTER"
					}	
				}

				"ThinkInterval"				"%interval"
				"OnIntervalThink"
				{
					"RunScript"
					{
						"ScriptFile" 	"scripts/vscripts/util/damage.lua"
						"Function"		"DamageAOE"
						"damage_type"	"DAMAGE_TYPE_PHYSICAL"
						"damage"		"%AbilityDamage"
						"Target"
				        {
				            "Types"     "DOTA_UNIT_TARGET_BASIC | DOTA_UNIT_TARGET_HERO"
				            "Teams"     "DOTA_UNIT_TARGET_TEAM_ENEMY"
				            "Flags"     "DOTA_UNIT_TARGET_FLAG_NONE"
				            "Center"    "CASTER"
				            "Radius"    "%radius"
				        }
					}
				}
			}

			"modifier_juggernaut_one_ability1_majia"	//马甲的modifier
			{
				"IsHidden"			"1"
				"Duration"			"%AbilityDuration"

				"OnCreated"
				{
					"AttachEffect"
					{
						"EffectName"		"particles/units/heroes/hero_juggernaut/juggernaut_blade_fury.vpcf"
						"EffectAttachType"  "follow_origin"
						"Target" 			"TARGET"
						"ControlPoints"
						{
							"00"			"00 00 05"
							"05"			"%radius_two %radius_two %radius_two"
						}
					}
				}

				"OnDestroy"
				{
					"RemoveUnit"	//删除马甲
					{
						"Target"			"TARGET"
					}
				}

				"ThinkInterval"				"%interval"
				"OnIntervalThink"
				{
					"RunScript"
					{
						"ScriptFile" 	"scripts/vscripts/Abilities/Hero_juggernaut.lua"
						"Function"		"OneAbility1UnitDamage"
						"damage"		"%AbilityDamage"
						"damage_type"	"DAMAGE_TYPE_PHYSICAL"
						"Target"
				        {
				            "Types"     "DOTA_UNIT_TARGET_BASIC | DOTA_UNIT_TARGET_HERO"
				            "Teams"     "DOTA_UNIT_TARGET_TEAM_ENEMY"
				            "Flags"     "DOTA_UNIT_TARGET_FLAG_NONE"
				            "Center"    "TARGET"
				            "Radius"    "%radius_two"
				        }
					}
				}
			}
		}

		"AbilitySpecial"
		{
			"01"	//英雄的剑刃风暴范围
			{
				"var_type"			"FIELD_INTEGER"
				"radius"			"200"
			}
			"02"	//外围的剑刃风暴范围
			{
				"var_type"			"FIELD_INTEGER"
				"radius_two"		"400"
			}
			"03"	//剑刃风暴数量
			{
				"var_type"			"FIELD_INTEGER"
				"storm_num"			"2"
			}
			"04"	//持续时间
			{
				"var_type"			"FIELD_FLOAT"
				"duration"			"5"
			}
			"05"	//伤害间隔
			{
				"var_type"			"FIELD_FLOAT"
				"interval"			"0.2"
			}
		}
	}

	//技能2：尾随
	"juggernaut_one_ability2"
	{
		"BaseClass"					"ability_datadriven"
		"AbilityBehavior"			"DOTA_ABILITY_BEHAVIOR_UNIT_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
		"AbilityUnitTargetType"		"DOTA_UNIT_TARGET_BASIC | DOTA_UNIT_TARGET_HERO"
		"AbilityUnitTargetTeam"		"DOTA_UNIT_TARGET_TEAM_BOTH"
		"AbilityUnitTargetFlags"	"DOTA_UNIT_TARGET_FLAG_NONE"

		"MaxLevel"					"7"
		"AbilityCastRange"			"200 225 250 275 300 325 350"
		"AbilityCastPoint"			"0"
		"AbilityManaCost"			"30"
		"AbilityCooldown"			"10"
		"AbilityTextureName"		"juggernaut_one_ability2"

		"OnSpellStart"
		{
			"RunScript"
			{
				"ScriptFile" 	"scripts/vscripts/Abilities/Hero_juggernaut.lua"
				"Function"		"OneAbility2OnCreate"
				"duration"		"%duration"
			}

			"ApplyModifier"
			{
				"Target" 			"CASTER"
				"ModifierName"		"modifier_juggernaut_one_ability2"
			}
		}

		"OnUpgrade"		//同步技能等级
		{
			"RunScript"
			{
				"ScriptFile" 	"scripts/vscripts/Abilities/common.lua"
				"Function"		"SyncAbilityLevel"
				"abilityName"	"juggernaut_one_ability2_over"
			}
		}

		"Modifiers"
		{
			"modifier_juggernaut_one_ability2"
			{
				"Duration"			"%duration"

				"Properties"
				{
					"MODIFIER_PROPERTY_ATTACK_RANGE_BONUS"	"%attack_range"	//攻击范围
				}

				"OnDestroy"
				{
					"RunScript"
					{
						"ScriptFile" 	"scripts/vscripts/Abilities/Hero_juggernaut.lua"
						"Function"		"OneAbility2Over"
					}
				}
			}
		}

		"AbilitySpecial"
		{
			"01"	//施法距离
			{
				"var_type"			"FIELD_INTEGER"
				"cast_range"		"200 225 250 275 300 325 350"
			}
			"03"	//攻击距离
			{
				"var_type"			"FIELD_INTEGER"
				"attack_range"		"150 160 170 180 200 220 240"
			}
			"02"	//持续时间
			{
				"var_type"			"FIELD_FLOAT"
				"duration"			"5 6 7 8 10 12 14"
			}
		}
	}

	"juggernaut_one_ability2_over"	//取消跟随
	{
		"BaseClass"					"ability_datadriven"
		"AbilityBehavior"			"DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE | DOTA_ABILITY_BEHAVIOR_HIDDEN"

		"MaxLevel"					"7"
		"AbilityCastPoint"			"0"
		"AbilityCooldown"			"1"
		"AbilityTextureName"		"stop"

		"OnSpellStart"
		{
			"RunScript"
			{
				"ScriptFile" 	"scripts/vscripts/Abilities/Hero_juggernaut.lua"
				"Function"		"OneAbility2Over"
			}
		}

		"OnUpgrade"		//同步技能等级
		{
			"RunScript"
			{
				"ScriptFile" 	"scripts/vscripts/Abilities/common.lua"
				"Function"		"SyncAbilityLevel"
				"abilityName"	"juggernaut_one_ability2"
			}
		}
	}

	//技能3：三把刀
	"juggernaut_one_ability3"
	{
		"BaseClass"					"ability_datadriven"
		"AbilityBehavior"			"DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"

		"MaxLevel"					"7"
		"AbilityCastPoint"			"0"
		"AbilityCooldown"			"1"
		"AbilityManaCost"			"3"
		"AbilityTextureName"		"juggernaut_omni_slash"

		"OnSpellStart"
		{
			"RunScript"
			{
				"ScriptFile" 	"scripts/vscripts/Abilities/Hero_juggernaut.lua"
				"Function"		"OneAbility3"
			}
		}

		"OnUpgrade"		//同步技能等级
		{
			"RunScript"
			{
				"ScriptFile" 	"scripts/vscripts/Abilities/common.lua"
				"Function"		"SyncAbilityLevel"
				"abilityName"	"juggernaut_one_ability3_kuangbao"
			}
			"RunScript"
			{
				"ScriptFile" 	"scripts/vscripts/Abilities/common.lua"
				"Function"		"SyncAbilityLevel"
				"abilityName"	"juggernaut_one_ability3_judu"
			}
			"RunScript"
			{
				"ScriptFile" 	"scripts/vscripts/Abilities/common.lua"
				"Function"		"SyncAbilityLevel"
				"abilityName"	"juggernaut_one_ability3_xixue"
			}
			"RunScript"
			{
				"ScriptFile" 	"scripts/vscripts/Abilities/Hero_juggernaut.lua"
				"Function"		"OneAbility3Init"
			}
		}

		"Modifiers"
		{
			"modifier_juggernaut_one_ability3" //用于英雄死亡后modifier消失的修复
			{
				"Passive"			"1"
				"IsHidden"			"1"

				"OnCreated"
				{
					"RunScript"
					{
						"ScriptFile" 	"scripts/vscripts/Abilities/Hero_juggernaut.lua"
						"Function"		"OneAbility3OnCreated"
					}
				}
			}
		}
	}

	//三把刀--狂暴
	"juggernaut_one_ability3_kuangbao"
	{
		"BaseClass"					"ability_datadriven"
		"AbilityBehavior"			"DOTA_ABILITY_BEHAVIOR_PASSIVE | DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE"

		"MaxLevel"					"7"
		"AbilityTextureName"		"sanbadao_kuangbao"

		"Modifiers"
		{
			"modifier_juggernaut_one_ability3_kuangbao"
			{
				"OnAttack"
				{
					"Random"
					{
						"Chance"			"%chance"
						"PseudeoRandom"		"DOTA_PSEUDO_RANDOM_JUGG_CRIT"
						"OnSuccess"
						{
							"ApplyModifier"
							{
								"Target" 			"CASTER"
								"ModifierName"		"modifier_juggernaut_one_ability3_kuangbao_effect"
							}
							"RunScript"
							{
								"ScriptFile" 	"scripts/vscripts/Abilities/Hero_juggernaut.lua"
								"Function"		"OneAbility3KBModifierCount"
								"AddOrLow"		"Add"
							}
						}
					}
				}
			}

			"modifier_juggernaut_one_ability3_kuangbao_effect"
			{
				"IsHidden"				"1"
				"Duration"				"%duration"
				"Attributes"			"MODIFIER_ATTRIBUTE_MULTIPLE"

				"OnCreated"
				{
					"RunScript"
					{
						"ScriptFile" 	"scripts/vscripts/util/damage.lua"
						"Function"		"AddAbilityDamage"
						"add_damage"	"%add_damage"
					}
				}

				"OnDestroy"
				{
					"RunScript"
					{
						"ScriptFile" 	"scripts/vscripts/util/damage.lua"
						"Function"		"LowAbilityDamage"
						"low_damage"	"%add_damage"
					}
					"RunScript"
					{
						"ScriptFile" 	"scripts/vscripts/Abilities/Hero_juggernaut.lua"
						"Function"		"OneAbility3KBModifierCount"
						"AddOrLow"		"Low"
					}
				}
			}
		}

		"AbilitySpecial"
		{
			"03"	//触发概率
			{
				"var_type"			"FIELD_INTEGER"
				"chance"			"35"
			}
			"01"	//持续时间
			{
				"var_type"			"FIELD_FLOAT"
				"duration"			"5 6 7 8 9 10 11"
			}
			"02"	//增加的技能伤害
			{
				"var_type"			"FIELD_INTEGER"
				"add_damage"		"5 10 15 20 25 30 35"
			}
		}
	}

	//三把刀--剧毒
	"juggernaut_one_ability3_judu"
	{
		"BaseClass"					"ability_datadriven"
		"AbilityBehavior"			"DOTA_ABILITY_BEHAVIOR_PASSIVE | DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE | DOTA_ABILITY_BEHAVIOR_HIDDEN"

		"MaxLevel"					"7"
		"AbilityTextureName"		"sanbadao_judu"

		"Modifiers"
		{
			"modifier_juggernaut_one_ability3_judu"
			{
				"OnAttackLanded"
				{
					"ApplyModifier"
					{
						"Target" 			"TARGET"
						"ModifierName"		"modifier_juggernaut_one_ability3_judu_effect"
					}
				}
			}

			"modifier_juggernaut_one_ability3_judu_effect"
			{
				"Duration"			"%duration"

				"OnCreated"
				{
					"Damage"
					{
						"Target"		 "TARGET"
						"Type"			 "DAMAGE_TYPE_PURE"
						"Damage"		 "%damage_init"
					}
				}

				"ThinkInterval"		"%interval"
				"OnIntervalThink"
				{
					"Damage"
					{
						"Target"		 "TARGET"
						"Type"			 "DAMAGE_TYPE_PURE"
						"Damage"		 "%damage_think"
					}
				}
			}
		}

		"AbilitySpecial"
		{
			"01"	//持续时间
			{
				"var_type"			"FIELD_FLOAT"
				"duration"			"20"
			}
			"02"	//初始伤害
			{
				"var_type"			"FIELD_INTEGER"
				"damage_init"		"50 100 150 200 250 300 350"
			}
			"03"	//持续伤害
			{
				"var_type"			"FIELD_INTEGER"
				"damage_think"		"5 10 15 20 25 30 35"
			}
			"04"	//伤害间隔
			{
				"var_type"			"FIELD_FLOAT"
				"interval"			"1 0.9 0.8 0.7 0.6 0.5 0.4"
			}
		}
	}

	//三把刀--吸血
	"juggernaut_one_ability3_xixue"
	{
		"BaseClass"					"ability_datadriven"
		"AbilityBehavior"			"DOTA_ABILITY_BEHAVIOR_PASSIVE | DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE | DOTA_ABILITY_BEHAVIOR_HIDDEN"

		"MaxLevel"					"7"
		"AbilityTextureName"		"sanbadao_xixue"

		"Modifiers"
		{
			"modifier_juggernaut_one_ability3_xixue"
			{
				"Properties"
				{
					"MODIFIER_PROPERTY_DAMAGEOUTGOING_PERCENTAGE"	"%damage_out" //攻击加成百分比
				}
				"OnAttackLanded"
				{
					"Lifesteal"
					{
						"Target"			"CASTER"
						"LifestealPercent"	"%life_percent"
					}
				}
			}
		}

		"AbilitySpecial"
		{
			"01"	//吸血百分比
			{
				"var_type"			"FIELD_INTEGER"
				"life_percent"		"50 75 100 125 150 175 200"
			}
			"02"	//攻击加成百分比
			{
				"var_type"			"FIELD_INTEGER"
				"damage_out"		"5 10 15 20 25 30 35"
			}
		}
	}
}
